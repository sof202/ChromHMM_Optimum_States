<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-intro" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Welcome to the ChromOptimise wiki! | ChromOptimise</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sof202.github.io/ChromOptimise/img/dna.png"><meta data-rh="true" name="twitter:image" content="https://sof202.github.io/ChromOptimise/img/dna.png"><meta data-rh="true" property="og:url" content="https://sof202.github.io/ChromOptimise/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Welcome to the ChromOptimise wiki! | ChromOptimise"><meta data-rh="true" name="description" content="ChromOptimise is a pipeline that identifies the optimum number of states that should be used with ChromHMM&#x27;s LearnModel command for a particular genomic dataset."><meta data-rh="true" property="og:description" content="ChromOptimise is a pipeline that identifies the optimum number of states that should be used with ChromHMM&#x27;s LearnModel command for a particular genomic dataset."><link data-rh="true" rel="icon" href="/ChromOptimise/img/dna.ico"><link data-rh="true" rel="canonical" href="https://sof202.github.io/ChromOptimise/"><link data-rh="true" rel="alternate" href="https://sof202.github.io/ChromOptimise/" hreflang="en"><link data-rh="true" rel="alternate" href="https://sof202.github.io/ChromOptimise/" hreflang="x-default"><script data-rh="true">function insertBanner(){var n=document.createElement("div");n.id="__docusaurus-base-url-issue-banner-container";n.innerHTML='\n<div id="__docusaurus-base-url-issue-banner" style="border: thick solid red; background-color: rgb(255, 230, 179); margin: 20px; padding: 20px; font-size: 20px;">\n   <p style="font-weight: bold; font-size: 30px;">Your Docusaurus site did not load properly.</p>\n   <p>A very common reason is a wrong site <a href="https://docusaurus.io/docs/docusaurus.config.js/#baseUrl" style="font-weight: bold;">baseUrl configuration</a>.</p>\n   <p>Current configured baseUrl = <span style="font-weight: bold; color: red;">/ChromOptimise/</span> </p>\n   <p>We suggest trying baseUrl = <span id="__docusaurus-base-url-issue-banner-suggestion-container" style="font-weight: bold; color: green;"></span></p>\n</div>\n',document.body.prepend(n);var e=document.getElementById("__docusaurus-base-url-issue-banner-suggestion-container"),s=window.location.pathname,o="/"===s.substr(-1)?s:s+"/";e.innerHTML=o}document.addEventListener("DOMContentLoaded",(function(){void 0===window.docusaurus&&insertBanner()}))</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/ChromOptimise/assets/css/styles.e3ab61ce.css">
<script src="/ChromOptimise/assets/js/runtime~main.cf7c3107.js" defer="defer"></script>
<script src="/ChromOptimise/assets/js/main.40f314be.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ChromOptimise/"><div class="navbar__logo"><img src="/ChromOptimise/img/logo.svg" alt="Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ChromOptimise/img/logo.svg" alt="Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">ChromOptimise</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ChromOptimise/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/sof202/ChromOptimise" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/ChromOptimise/">Welcome to the ChromOptimise wiki!</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/ChromOptimise/category/chromoptimise-documentation">ChromOptimise Documentation</a><button aria-label="Expand sidebar category &#x27;ChromOptimise Documentation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ChromOptimise/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Welcome to the ChromOptimise wiki!</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Welcome to the ChromOptimise wiki!</h1>
<p>ChromOptimise is a pipeline that identifies the optimum number of states that should be used with <a href="https://compbio.mit.edu/ChromHMM/#:~:text=ChromHMM%20is%20software%20for%20learning,and%20spatial%20patterns%20of%20marks." target="_blank" rel="noopener noreferrer">ChromHMM</a>&#x27;s <code>LearnModel</code> command for a particular genomic dataset.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="about">About<a href="#about" class="hash-link" aria-label="Direct link to About" title="Direct link to About">​</a></h2>
<p>When using <a href="https://compbio.mit.edu/ChromHMM/#:~:text=ChromHMM%20is%20software%20for%20learning,and%20spatial%20patterns%20of%20marks." target="_blank" rel="noopener noreferrer">ChromHMM</a> to learn hidden Markov models for genomic data, it is often difficult to determine how many states to include:</p>
<ul>
<li>Including too many states will result in overfitting your data and introduces redundant states</li>
<li>Including too few states will result in underfitting your data and thus results in lower model accuracy</li>
</ul>
<p>This pipeline identifies the optimal number of states to use by finding a model that avoids the two above points.</p>
<p>After using this pipeline, the user will have greater knowledge over their dataset in the context of ChromHMM, which will allow them to make more informed decisions as they continue to further downstream analysis.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="getting-started">Getting started<a href="#getting-started" class="hash-link" aria-label="Direct link to Getting started" title="Direct link to Getting started">​</a></h2>
<ol>
<li>Clone this repository</li>
<li>Ensure all <a href="#software-requirements">required software</a> is installed</li>
<li>Generate the <a href="https://github.com/sof202/ChromOptimise/wiki/Configuration-Files-Setup#data-directory-structure" target="_blank" rel="noopener noreferrer">file structure</a></li>
<li>Run the <a href="https://github.com/sof202/ChromOptimise/blob/main/setup" target="_blank" rel="noopener noreferrer"><code>setup</code></a> executable<!-- -->
<ul>
<li>You may need to use <code>chmod +x setup</code> first</li>
<li>The user will be prompted for whether they want to remove lines beginning with <code>module</code> (artefact of HPC system used at UoE)</li>
</ul>
</li>
<li>Create the configuration files using the <a href="https://github.com/sof202/ChromOptimise/wiki/Configuration-Files-Setup" target="_blank" rel="noopener noreferrer">templates</a> provided</li>
<li>Place configuration files in the <a href="https://github.com/sof202/ChromOptimise/tree/main/configuration" target="_blank" rel="noopener noreferrer">configuration</a> directory</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="usage">Usage<a href="#usage" class="hash-link" aria-label="Direct link to Usage" title="Direct link to Usage">​</a></h2>
<p>After completing <a href="#getting-started">&#x27;getting started&#x27;</a>, run each of the shell scripts in <a href="https://github.com/sof202/ChromOptimise/tree/main/JobSubmission" target="_blank" rel="noopener noreferrer">JobSubmission</a> sequentially for each epigenetic mark. For further information and <strong>example code</strong> please consult the <a href="https://github.com/sof202/ChromOptimise/wiki/Pipeline-Explanation" target="_blank" rel="noopener noreferrer">wiki</a> and the <a href="https://github.com/sof202/ChromOptimise/blob/main/information/Optimal_States_Analysis_Pipeline.pdf" target="_blank" rel="noopener noreferrer">related schematic representation</a>.
<br>
<!-- -->Depending on your chosen dataset, you may not need to run all scripts. For example:</p>
<ul>
<li>If you are not downloading data from EGA, the first two scripts are not necessary<!-- -->
<ul>
<li>Just ensure that <code>.bam</code> files are organised into directories named [[epigenetic mark name]] within the <a href="https://github.com/sof202/ChromOptimise/wiki/Configuration-Files-Setup#data-directory-structure" target="_blank" rel="noopener noreferrer">raw files directory</a></li>
</ul>
</li>
<li>If your data is already processed (quality controlled), then start from the subsampling script.<!-- -->
<ul>
<li>Again, ensure that <code>.bam</code> files are organised into directories named [[epigenetic mark name]] within the <a href="https://github.com/sof202/ChromOptimise/wiki/Configuration-Files-Setup#data-directory-structure" target="_blank" rel="noopener noreferrer">Processed files directory</a></li>
</ul>
</li>
</ul>
<p>There also exists supplementary scripts for further information on your chosen data set. Most importantly, thresholds used in redundancy analysis can be inferred from the results of <a href="https://github.com/sof202/ChromOptimise/tree/main/supplementary/Redundancy_Threshold_Optimisation" target="_blank" rel="noopener noreferrer">Redundancy_Threshold_Optimisation</a>. Further details for these scripts can be found in the <a href="https://github.com/sof202/ChromOptimise/wiki/Pipeline-Explanation" target="_blank" rel="noopener noreferrer">wiki</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="important-notes">Important notes<a href="#important-notes" class="hash-link" aria-label="Direct link to Important notes" title="Direct link to Important notes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="note-1">Note 1<a href="#note-1" class="hash-link" aria-label="Direct link to Note 1" title="Direct link to Note 1">​</a></h3>
<p>This pipeline was designed with a very large dataset in mind (the dataset being blueprint obtained from EGA). This particular dataset includes a large quantity of ChIP-Seq data from mature neutrophils in blood samples. This is why a subsampling stage was implemented. This step of the pipeline might not be required if your dataset is relatively small. Regardless of this, please run the associated script still as subsequent scripts rely on a specific file structure.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="note-2">Note 2<a href="#note-2" class="hash-link" aria-label="Direct link to Note 2" title="Direct link to Note 2">​</a></h3>
<p>To display a short version of the preamble for each script in the command line, run the script with a <code>-h</code> or <code>--help</code> flag.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="software-requirements">Software requirements<a href="#software-requirements" class="hash-link" aria-label="Direct link to Software requirements" title="Direct link to Software requirements">​</a></h2>
<p>This pipeline requires a unix-flavoured OS with the following software installed:</p>
<ul>
<li><a href="https://www.gnu.org/software/bash/" target="_blank" rel="noopener noreferrer">Bash</a> (&gt;=4.2.46(2))</li>
<li><a href="https://slurm.schedmd.com/overview.html" target="_blank" rel="noopener noreferrer">SLURM Workload Manager</a> (&gt;=20.02.3)</li>
<li><a href="http://www.htslib.org" target="_blank" rel="noopener noreferrer">SAMtools</a> (&gt;=1.9)</li>
<li><a href="https://www.r-project.org" target="_blank" rel="noopener noreferrer">R</a> (&gt;=3.6.0)</li>
<li><a href="https://www.java.com/en/" target="_blank" rel="noopener noreferrer">Java</a> (&gt;= openjdk 13.0.2)</li>
<li><a href="https://compbio.mit.edu/ChromHMM/#:~:text=ChromHMM%20is%20software%20for%20learning,and%20spatial%20patterns%20of%20marks." target="_blank" rel="noopener noreferrer">ChromHMM</a> (&gt;=1.23)</li>
<li><a href="https://github.com/coreutils/coreutils/tree/master" target="_blank" rel="noopener noreferrer">readlink</a> (&gt;= 8.22)</li>
<li><a href="https://www.gnu.org/software/sed/" target="_blank" rel="noopener noreferrer">sed</a> (&gt;=4.2.2)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="further-information">Further information<a href="#further-information" class="hash-link" aria-label="Direct link to Further information" title="Direct link to Further information">​</a></h2>
<p>This study makes use of data generated by the Blueprint Consortium. A full list of the investigators who contributed to the generation of the data is available from <a href="http://www.blueprint-epigenome.eu" target="_blank" rel="noopener noreferrer">www.blueprint-epigenome.eu</a>. Funding for the project was provided by the European Union&#x27;s Seventh Framework Programme (FP7/2007-2013) under grant agreement no 282510 – BLUEPRINT.</p>
<p>For any further enquiries, please open an issue or contact Sam Fletcher:
<br>
<a href="mailto:s.o.fletcher@exeter.ac.uk" target="_blank" rel="noopener noreferrer">s.o.fletcher@exeter.ac.uk</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--next" href="/ChromOptimise/category/chromoptimise-documentation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">ChromOptimise Documentation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#about" class="table-of-contents__link toc-highlight">About</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting started</a></li><li><a href="#usage" class="table-of-contents__link toc-highlight">Usage</a></li><li><a href="#important-notes" class="table-of-contents__link toc-highlight">Important notes</a><ul><li><a href="#note-1" class="table-of-contents__link toc-highlight">Note 1</a></li><li><a href="#note-2" class="table-of-contents__link toc-highlight">Note 2</a></li></ul></li><li><a href="#software-requirements" class="table-of-contents__link toc-highlight">Software requirements</a></li><li><a href="#further-information" class="table-of-contents__link toc-highlight">Further information</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 ChromOptimise, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>